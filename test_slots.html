<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊßΩ‰ΩçÂäüËÉΩÊ∏¨Ë©¶</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h2><i class="fas fa-bookmark"></i> ÊßΩ‰ΩçÂäüËÉΩÊ∏¨Ë©¶</h2>
                <p class="text-muted">Ê∏¨Ë©¶4ÂÄãÊßΩ‰ΩçÁöÑ‰øùÂ≠òÂíåËºâÂÖ•ÂäüËÉΩ</p>
                
                <!-- Ê®°Êì¨Á∑®ËºØÂô® -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-code"></i> Ê®°Êì¨Á∑®ËºØÂô®</h5>
                    </div>
                    <div class="card-body">
                        <textarea id="mockEditor" class="form-control" rows="10" placeholder="Âú®ÈÄôË£°Ëº∏ÂÖ•‰ª£Á¢º...">print("Hello World")</textarea>
                    </div>
                </div>
                
                <!-- ‰øùÂ≠òÊåâÈàïÁµÑ -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-save"></i> ‰øùÂ≠òÂäüËÉΩ</h5>
                    </div>
                    <div class="card-body">
                        <div class="btn-group me-2" role="group">
                            <button class="btn btn-outline-primary" onclick="testSaveCode()">
                                <i class="fas fa-save"></i> ‰øùÂ≠ò
                            </button>
                            <button class="btn btn-outline-primary dropdown-toggle dropdown-toggle-split" type="button" data-bs-toggle="dropdown">
                                <span class="visually-hidden">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><h6 class="dropdown-header">‰øùÂ≠òÂà∞ÊßΩ‰Ωç</h6></li>
                                <li><a class="dropdown-item" href="#" onclick="testSaveToSlot(1)">
                                    <i class="fas fa-bookmark text-primary"></i> <span id="slot1Name">ÊßΩ‰Ωç 1 (Á©∫)</span>
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="testSaveToSlot(2)">
                                    <i class="fas fa-bookmark text-success"></i> <span id="slot2Name">ÊßΩ‰Ωç 2 (Á©∫)</span>
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="testSaveToSlot(3)">
                                    <i class="fas fa-bookmark text-warning"></i> <span id="slot3Name">ÊßΩ‰Ωç 3 (Á©∫)</span>
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="testSaveToSlot(4)">
                                    <i class="fas fa-bookmark text-danger"></i> <span id="slot4Name">ÊßΩ‰Ωç 4 (Á©∫)</span>
                                </a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- ËºâÂÖ•ÊåâÈàïÁµÑ -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-download"></i> ËºâÂÖ•ÂäüËÉΩ</h5>
                    </div>
                    <div class="card-body">
                        <div class="btn-group me-2" role="group">
                            <button class="btn btn-outline-secondary" onclick="testLoadCode()">
                                <i class="fas fa-sync-alt"></i> ËºâÂÖ•
                            </button>
                            <button class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split" type="button" data-bs-toggle="dropdown">
                                <span class="visually-hidden">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><h6 class="dropdown-header">ËºâÂÖ•ÈÅ∏È†Ö</h6></li>
                                <li><a class="dropdown-item" href="#" onclick="testLoadCode()">
                                    <i class="fas fa-sync-alt text-success"></i> ËºâÂÖ•ÊúÄÊñ∞
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><h6 class="dropdown-header">ÊßΩ‰ΩçË®òÈåÑ</h6></li>
                                <li><a class="dropdown-item" href="#" onclick="testLoadFromSlot(1)">
                                    <i class="fas fa-bookmark text-primary"></i> <span id="loadSlot1Name">ÊßΩ‰Ωç 1 (Á©∫)</span>
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="testLoadFromSlot(2)">
                                    <i class="fas fa-bookmark text-success"></i> <span id="loadSlot2Name">ÊßΩ‰Ωç 2 (Á©∫)</span>
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="testLoadFromSlot(3)">
                                    <i class="fas fa-bookmark text-warning"></i> <span id="loadSlot3Name">ÊßΩ‰Ωç 3 (Á©∫)</span>
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="testLoadFromSlot(4)">
                                    <i class="fas fa-bookmark text-danger"></i> <span id="loadSlot4Name">ÊßΩ‰Ωç 4 (Á©∫)</span>
                                </a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Êó•Ë™åÂçÄÂüü -->
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-list"></i> Êìç‰ΩúÊó•Ë™å</h5>
                        <button class="btn btn-sm btn-outline-secondary" onclick="clearLog()">Ê∏ÖÈô§Êó•Ë™å</button>
                    </div>
                    <div class="card-body">
                        <div id="testLog" style="height: 200px; overflow-y: auto; background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Ê®°Êì¨EditorÂ∞çË±°
        window.Editor = {
            getCode: function() {
                return document.getElementById('mockEditor').value;
            },
            setCode: function(code) {
                document.getElementById('mockEditor').value = code;
            }
        };

        // Ê®°Êì¨UIÂ∞çË±°  
        window.UI = {
            showMessage: function(message, type) {
                log(`UIÊ∂àÊÅØ [${type}]: ${message}`);
                if (type === 'error') {
                    alert(`ÈåØË™§: ${message}`);
                }
            }
        };

        // Á∞°ÂñÆÁöÑÊ®°Êì¨SaveLoadManager
        class MockSaveLoadManager {
            constructor() {
                this.userSlots = {};
                this.isInitialized = true;
                this.loadSlotsFromStorage();
            }

            loadSlotsFromStorage() {
                try {
                    const stored = localStorage.getItem('userCodeSlots');
                    if (stored) {
                        this.userSlots = JSON.parse(stored);
                        this.updateSlotDisplayNames();
                    }
                } catch (error) {
                    console.error('ËºâÂÖ•ÊßΩ‰ΩçÊï∏ÊìöÂ§±Êïó:', error);
                }
            }

            saveSlotsToStorage() {
                try {
                    localStorage.setItem('userCodeSlots', JSON.stringify(this.userSlots));
                } catch (error) {
                    console.error('‰øùÂ≠òÊßΩ‰ΩçÊï∏ÊìöÂ§±Êïó:', error);
                }
            }

            updateSlotDisplayNames() {
                for (let i = 1; i <= 4; i++) {
                    const slot = this.userSlots[i];
                    const saveSlotNameEl = document.getElementById(`slot${i}Name`);
                    const loadSlotNameEl = document.getElementById(`loadSlot${i}Name`);
                    
                    if (slot) {
                        const displayName = `${slot.name} (${new Date(slot.timestamp).toLocaleDateString()})`;
                        if (saveSlotNameEl) saveSlotNameEl.textContent = displayName;
                        if (loadSlotNameEl) loadSlotNameEl.textContent = displayName;
                    } else {
                        const defaultName = `ÊßΩ‰Ωç ${i} (Á©∫)`;
                        if (saveSlotNameEl) saveSlotNameEl.textContent = defaultName;
                        if (loadSlotNameEl) loadSlotNameEl.textContent = defaultName;
                    }
                }
            }

            saveToSlot(slotNumber) {
                const code = Editor.getCode();
                if (!code.trim()) {
                    alert('‰ª£Á¢ºÂÖßÂÆπÁÇ∫Á©∫');
                    return;
                }

                const name = prompt(`ÁÇ∫ÊßΩ‰Ωç ${slotNumber} ÂëΩÂêç:`, `Á®ãÂºèÁ¢º - ${new Date().toLocaleDateString()}`);
                if (!name) return;

                this.userSlots[slotNumber] = {
                    name: name,
                    code: code,
                    timestamp: Date.now()
                };

                this.saveSlotsToStorage();
                this.updateSlotDisplayNames();
                log(`‚úÖ Â∑≤‰øùÂ≠òÂà∞ÊßΩ‰Ωç ${slotNumber}: ${name}`);
            }

            loadFromSlot(slotNumber) {
                const slot = this.userSlots[slotNumber];
                if (!slot) {
                    alert(`ÊßΩ‰Ωç ${slotNumber} ÊòØÁ©∫ÁöÑ`);
                    return;
                }

                if (confirm(`Á¢∫ÂÆöËºâÂÖ•ÊßΩ‰Ωç ${slotNumber}: ${slot.name}Ôºü`)) {
                    Editor.setCode(slot.code);
                    log(`‚úÖ Â∑≤ÂæûÊßΩ‰Ωç ${slotNumber} ËºâÂÖ•: ${slot.name}`);
                }
            }

            checkInitialized() {
                return this.isInitialized;
            }

            showMessage(message, type) {
                UI.showMessage(message, type);
            }
        }

        // ÂâµÂª∫Ê®°Êì¨ÂØ¶‰æã
        window.SaveLoadManager = new MockSaveLoadManager();

        // Ê∏¨Ë©¶ÂáΩÊï∏
        function testSaveCode() {
            log('üîÑ Ê®°Êì¨ÊôÆÈÄö‰øùÂ≠òÂäüËÉΩ');
        }

        function testSaveToSlot(slotNumber) {
            log(`üîÑ ‰øùÂ≠òÂà∞ÊßΩ‰Ωç ${slotNumber}`);
            SaveLoadManager.saveToSlot(slotNumber);
        }

        function testLoadCode() {
            log('üîÑ Ê®°Êì¨ÊôÆÈÄöËºâÂÖ•ÂäüËÉΩ');
        }

        function testLoadFromSlot(slotNumber) {
            log(`üîÑ ÂæûÊßΩ‰Ωç ${slotNumber} ËºâÂÖ•`);
            SaveLoadManager.loadFromSlot(slotNumber);
        }

        function log(message) {
            const logEl = document.getElementById('testLog');
            const time = new Date().toLocaleTimeString();
            logEl.innerHTML += `[${time}] ${message}<br>`;
            logEl.scrollTop = logEl.scrollHeight;
        }

        function clearLog() {
            document.getElementById('testLog').innerHTML = '';
        }

        // ÂàùÂßãÂåñ
        window.addEventListener('load', function() {
            log('üöÄ ÊßΩ‰ΩçÂäüËÉΩÊ∏¨Ë©¶È†ÅÈù¢Â∑≤ËºâÂÖ•');
            SaveLoadManager.updateSlotDisplayNames();
        });
    </script>
</body>
</html> 