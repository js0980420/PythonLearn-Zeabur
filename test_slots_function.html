<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ§½ä½åŠŸèƒ½æ¸¬è©¦</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h2><i class="fas fa-bookmark"></i> æ§½ä½åŠŸèƒ½æ¸¬è©¦</h2>
        <p>æ¸¬è©¦ä¿å­˜åˆ°4å€‹æ§½ä½å’Œå¾æ§½ä½è¼‰å…¥çš„åŠŸèƒ½</p>
        
        <!-- ç·¨è¼¯å™¨å€åŸŸ -->
        <div class="card mb-4">
            <div class="card-header">ç·¨è¼¯å™¨</div>
            <div class="card-body">
                <textarea id="mockEditor" class="form-control" rows="8">print("Hello World")</textarea>
            </div>
        </div>
        
        <!-- ä¿å­˜æŒ‰éˆ•çµ„ -->
        <div class="btn-group me-2 mb-3">
            <button class="btn btn-primary" onclick="testSaveCode()">
                <i class="fas fa-save"></i> ä¿å­˜
            </button>
            <button class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
                <span class="visually-hidden">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu">
                <li><h6 class="dropdown-header">ä¿å­˜åˆ°æ§½ä½</h6></li>
                <li><a class="dropdown-item" href="#" onclick="testSaveToSlot(1)">
                    <i class="fas fa-bookmark text-primary"></i> <span id="slot1Name">æ§½ä½ 1 (ç©º)</span>
                </a></li>
                <li><a class="dropdown-item" href="#" onclick="testSaveToSlot(2)">
                    <i class="fas fa-bookmark text-success"></i> <span id="slot2Name">æ§½ä½ 2 (ç©º)</span>
                </a></li>
                <li><a class="dropdown-item" href="#" onclick="testSaveToSlot(3)">
                    <i class="fas fa-bookmark text-warning"></i> <span id="slot3Name">æ§½ä½ 3 (ç©º)</span>
                </a></li>
                <li><a class="dropdown-item" href="#" onclick="testSaveToSlot(4)">
                    <i class="fas fa-bookmark text-danger"></i> <span id="slot4Name">æ§½ä½ 4 (ç©º)</span>
                </a></li>
            </ul>
        </div>
        
        <!-- è¼‰å…¥æŒ‰éˆ•çµ„ -->
        <div class="btn-group me-2 mb-3">
            <button class="btn btn-secondary" onclick="testLoadCode()">
                <i class="fas fa-download"></i> è¼‰å…¥
            </button>
            <button class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
                <span class="visually-hidden">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu">
                <li><h6 class="dropdown-header">è¼‰å…¥æ§½ä½</h6></li>
                <li><a class="dropdown-item" href="#" onclick="testLoadFromSlot(1)">
                    <i class="fas fa-bookmark text-primary"></i> <span id="loadSlot1Name">æ§½ä½ 1 (ç©º)</span>
                </a></li>
                <li><a class="dropdown-item" href="#" onclick="testLoadFromSlot(2)">
                    <i class="fas fa-bookmark text-success"></i> <span id="loadSlot2Name">æ§½ä½ 2 (ç©º)</span>
                </a></li>
                <li><a class="dropdown-item" href="#" onclick="testLoadFromSlot(3)">
                    <i class="fas fa-bookmark text-warning"></i> <span id="loadSlot3Name">æ§½ä½ 3 (ç©º)</span>
                </a></li>
                <li><a class="dropdown-item" href="#" onclick="testLoadFromSlot(4)">
                    <i class="fas fa-bookmark text-danger"></i> <span id="loadSlot4Name">æ§½ä½ 4 (ç©º)</span>
                </a></li>
            </ul>
        </div>
        
        <!-- æ—¥èªŒ -->
        <div class="card">
            <div class="card-header">æ“ä½œæ—¥èªŒ</div>
            <div class="card-body">
                <div id="testLog" style="height: 200px; overflow-y: auto; background: #f8f9fa; padding: 10px; font-family: monospace; font-size: 12px;"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // æ¨¡æ“¬Editor
        window.Editor = {
            getCode: () => document.getElementById('mockEditor').value,
            setCode: (code) => document.getElementById('mockEditor').value = code
        };

        // ç°¡åŒ–ç‰ˆSaveLoadManager
        window.SaveLoadManager = {
            userSlots: JSON.parse(localStorage.getItem('userCodeSlots') || '{}'),
            
            updateSlotDisplayNames() {
                for (let i = 1; i <= 4; i++) {
                    const slot = this.userSlots[i];
                    const saveEl = document.getElementById(`slot${i}Name`);
                    const loadEl = document.getElementById(`loadSlot${i}Name`);
                    
                    const name = slot ? `${slot.name} (${new Date(slot.timestamp).toLocaleDateString()})` : `æ§½ä½ ${i} (ç©º)`;
                    if (saveEl) saveEl.textContent = name;
                    if (loadEl) loadEl.textContent = name;
                }
            },
            
            saveToSlot(slotNumber) {
                const code = Editor.getCode();
                if (!code.trim()) {
                    alert('ä»£ç¢¼ç‚ºç©º');
                    return;
                }
                
                const name = prompt(`ç‚ºæ§½ä½ ${slotNumber} å‘½å:`, `ç¨‹å¼ç¢¼-${new Date().toLocaleDateString()}`);
                if (!name) return;
                
                this.userSlots[slotNumber] = {
                    name: name,
                    code: code,
                    timestamp: Date.now()
                };
                
                localStorage.setItem('userCodeSlots', JSON.stringify(this.userSlots));
                this.updateSlotDisplayNames();
                log(`âœ… ä¿å­˜åˆ°æ§½ä½ ${slotNumber}: ${name}`);
            },
            
            loadFromSlot(slotNumber) {
                const slot = this.userSlots[slotNumber];
                if (!slot) {
                    alert(`æ§½ä½ ${slotNumber} ç‚ºç©º`);
                    return;
                }
                
                if (confirm(`è¼‰å…¥æ§½ä½ ${slotNumber}: ${slot.name}ï¼Ÿ`)) {
                    Editor.setCode(slot.code);
                    log(`âœ… å¾æ§½ä½ ${slotNumber} è¼‰å…¥: ${slot.name}`);
                }
            }
        };

        function testSaveCode() {
            log('æ¨¡æ“¬æ™®é€šä¿å­˜');
        }

        function testSaveToSlot(slotNumber) {
            log(`ä¿å­˜åˆ°æ§½ä½ ${slotNumber}`);
            SaveLoadManager.saveToSlot(slotNumber);
        }

        function testLoadCode() {
            log('æ¨¡æ“¬æ™®é€šè¼‰å…¥');
        }

        function testLoadFromSlot(slotNumber) {
            log(`å¾æ§½ä½ ${slotNumber} è¼‰å…¥`);
            SaveLoadManager.loadFromSlot(slotNumber);
        }

        function log(message) {
            const logEl = document.getElementById('testLog');
            const time = new Date().toLocaleTimeString();
            logEl.innerHTML += `[${time}] ${message}<br>`;
            logEl.scrollTop = logEl.scrollHeight;
        }

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            SaveLoadManager.updateSlotDisplayNames();
            log('ğŸš€ æ§½ä½åŠŸèƒ½æ¸¬è©¦é é¢å·²è¼‰å…¥');
        });
    </script>
</body>
</html> 